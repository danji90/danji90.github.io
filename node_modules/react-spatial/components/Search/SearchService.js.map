{"version":3,"file":"SearchService.js","sources":["../../../src/components/Search/SearchService.js"],"sourcesContent":["class SearchService {\n  constructor({ apiKey, engines, setSuggestions }) {\n    this.engines = engines;\n    this.setSuggestions = setSuggestions;\n    Object.entries(this.engines).forEach(([, e]) => e.setApiKey(apiKey));\n  }\n\n  countItems(section) {\n    return this.engines[section].items && this.engines[section].items.length;\n  }\n\n  render(item) {\n    return this.engines[item.section].render(item);\n  }\n\n  value(item) {\n    return this.engines[item.section].constructor.value(item);\n  }\n\n  search(value) {\n    Object.entries(this.engines).forEach(([section, engine], position) => {\n      engine.search(value).then((items) => {\n        engine.setItems(items);\n        this.upsert(section, engine.getItems(items), position);\n      });\n    });\n  }\n\n  sectionCollapsed(section) {\n    return this.engines[section].collapsed;\n  }\n\n  toggleSection(toggledSection) {\n    Object.entries(this.engines).forEach(([section, engine], position) => {\n      engine.collapse(!(section === toggledSection && engine.collapsed));\n      this.upsert(section, engine.getItems(), position);\n    });\n  }\n\n  upsert(section, items, position) {\n    this.setSuggestions((oldSuggestions) => {\n      const sectionIndex = oldSuggestions.findIndex(\n        (s) => s.section === section,\n      );\n      const start = sectionIndex === -1 ? position : sectionIndex;\n      const deleteCount = sectionIndex === -1 ? 0 : 1;\n      const newSuggestions = [...oldSuggestions];\n      newSuggestions.splice(start, deleteCount, { section, items });\n      return newSuggestions;\n    });\n  }\n}\n\nexport default SearchService;\n"],"names":["this","const"],"mappings":"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"}