{"version":3,"file":"LayerTree.js","sources":["../../../src/components/LayerTree/LayerTree.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  /**\n   * Layers provider.\n   */\n  layerService: PropTypes.object,\n\n  /**\n   * CSS class to apply on the container.\n   */\n  className: PropTypes.string,\n\n  /**\n   * Padding left to apply on each level.\n   */\n  padding: PropTypes.number,\n\n  /**\n   * Determine if the item is hidden in the tree or not.\n   *\n   * @param {object} item The item to hide or not.\n   *\n   * @return {bool} true if the item is not displayed in the tree\n   */\n  isItemHidden: PropTypes.func,\n\n  /**\n   * Determine the className used by the div containing the parent and its children.\n   */\n  getParentClassName: PropTypes.func,\n\n  /**\n   * Custom function to render an item in the tree.\n   *\n   * @param {object} item The item to render.\n   *\n   * @return {node} A jsx node.\n   */\n  renderItem: PropTypes.func,\n\n  /**\n   * Custom function to render only the content of an item in the tree.\n   *\n   * @param {object} item The item to render.\n   *\n   * @return {node} A jsx node.\n   */\n  renderItemContent: PropTypes.func,\n\n  /**\n   * Custom function to render custom content before the list of children of an item.\n   *\n   * @param {object} item The item to render.\n   *\n   * @return {node} A jsx node.\n   */\n  renderBeforeItem: PropTypes.func,\n\n  /**\n   * Custom function to render custom content after the list of children of an item.\n   *\n   * @param {object} item The item to render.\n   *\n   * @return {node} A jsx node.\n   */\n  renderAfterItem: PropTypes.func,\n\n  /**\n   * Object holding title for the layer tree's buttons.\n   */\n  titles: PropTypes.shape({\n    /**\n     * aria-label on checkbox to show layer.\n     */\n    layerShow: PropTypes.string,\n    /**\n     * aria-label on checkbox to hide layer.\n     */\n    layerHide: PropTypes.string,\n    /**\n     * title on button to show sublayers.\n     */\n    subLayerShow: PropTypes.string,\n    /**\n     * title on button to show sublayers.\n     */\n    subLayerHide: PropTypes.string,\n  }),\n\n  /**\n   * Translation function.\n   * @param {function} Translation function returning the translated string.\n   */\n  t: PropTypes.func,\n};\n\nconst defaultProps = {\n  layerService: undefined,\n  className: 'rs-layer-tree',\n  padding: 30,\n  isItemHidden: () => false,\n  getParentClassName: () => undefined,\n  renderItem: null,\n  renderItemContent: null,\n  renderBeforeItem: null,\n  renderAfterItem: null,\n  titles: {\n    layerShow: 'Show layer',\n    layerHide: 'Hide layer',\n    subLayerShow: 'Show sublayer',\n    subLayerHide: 'Hide sublayer',\n  },\n  t: (s) => s,\n};\n\n/**\n * The LayerTree component renders an interface for toggling\n * [mobility-toolbox-js layers](https://mobility-toolbox-js.geops.io/api/identifiers%20html#ol-layers)\n * and their corresponding child layers.\n */\n\nclass LayerTree extends Component {\n  constructor(props) {\n    super(props);\n    const { layerService, isItemHidden } = this.props;\n    const initialExpandedLayerNames =\n      layerService && layerService.getLayers()\n        ? this.getExpandedLayers(\n            layerService\n              .getLayers()\n              .filter(\n                (l) =>\n                  !isItemHidden(l) &&\n                  l.getVisibleChildren().filter((c) => !isItemHidden(c)).length,\n              ),\n          )\n        : [];\n\n    this.state = {\n      layers: layerService ? layerService.getLayers() : [],\n      expandedLayerNames: initialExpandedLayerNames,\n    };\n    this.updateLayers = this.updateLayers.bind(this);\n    this.olKeys = [];\n  }\n\n  componentDidMount() {\n    this.updateLayerService();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { layerService } = this.props;\n\n    if (layerService !== prevProps.layerService) {\n      this.updateLayerService();\n    }\n  }\n\n  componentWillUnmount() {\n    const { layerService } = this.props;\n    layerService.un('change:visible', this.updateLayers);\n  }\n\n  onInputClick(layer, toggle = false) {\n    if (toggle) {\n      this.onToggle(layer);\n    } else {\n      layer.setVisible(!layer.visible);\n    }\n  }\n\n  onToggle(layer) {\n    const { expandedLayerNames } = this.state;\n    const pos = expandedLayerNames.indexOf(layer);\n    if (pos > -1) {\n      expandedLayerNames.splice(pos, 1);\n    } else {\n      expandedLayerNames.push(...this.getExpandedLayers([layer]));\n    }\n\n    this.setState({ expandedLayerNames });\n  }\n\n  /**\n   * Get the always expanded ancestors (isAlwaysExpanded=true) of the given layers\n   * together with the (given) initially expanded layers\n   *\n   * @param  {Layer} layers Initially expanded layers\n   * @return {Array.<Layer>} Initially expanded layers and all its always expanded ancestors\n   */\n  getExpandedLayers(layers) {\n    const { isItemHidden } = this.props;\n    const children = layers.flatMap((l) =>\n      l.children.filter((c) => !isItemHidden(c) && c.get('isAlwaysExpanded')),\n    );\n\n    if (!children.length) {\n      return layers;\n    }\n    return [...layers, this.getExpandedLayers(children)].flat();\n  }\n\n  updateLayerService() {\n    const { layerService } = this.props;\n    if (layerService) {\n      layerService.un('change:visible', this.updateLayers);\n      this.updateLayers();\n      layerService.on('change:visible', this.updateLayers);\n    }\n  }\n\n  updateLayers() {\n    const { layerService } = this.props;\n    this.setState({\n      layers: layerService.getLayers(),\n    });\n  }\n\n  renderInput(layer) {\n    const { titles, isItemHidden } = this.props;\n    let tabIndex = 0;\n\n    if (!layer.children.filter((c) => !isItemHidden(c)).length) {\n      // We forbid focus on keypress event for first level layers and layers without children.\n      tabIndex = -1;\n    }\n\n    const inputType = layer.get('radioGroup') ? 'radio' : 'checkbox';\n    return (\n      // eslint-disable-next-line jsx-a11y/label-has-associated-control,jsx-a11y/no-noninteractive-element-interactions\n      <label\n        className={`rs-layer-tree-input rs-layer-tree-input-${inputType} rs-${inputType}`}\n        tabIndex={tabIndex}\n        title={layer.visible ? titles.layerHide : titles.layerShow}\n        aria-label={layer.visible ? titles.layerHide : titles.layerShow}\n        onKeyPress={(e) => {\n          if (e.which === 13) {\n            this.onInputClick(layer);\n          }\n        }}\n      >\n        <input\n          type={inputType}\n          tabIndex={-1}\n          checked={layer.visible}\n          readOnly\n          onClick={() => this.onInputClick(layer)}\n        />\n        <span />\n      </label>\n    );\n  }\n\n  renderArrow(layer) {\n    const { isItemHidden } = this.props;\n    const { expandedLayerNames } = this.state;\n\n    if (\n      !layer.children.filter((c) => !isItemHidden(c)).length ||\n      layer.get('isAlwaysExpanded')\n    ) {\n      return null;\n    }\n\n    return (\n      <div\n        className={`rs-layer-tree-arrow rs-layer-tree-arrow-${\n          !expandedLayerNames.includes(layer) ? 'collapsed' : 'expanded'\n        }`}\n      />\n    );\n  }\n\n  // Render a button which expands/collapse the layer if there is children\n  // or simulate a click on the input otherwise.\n  renderToggleButton(layer) {\n    const { t, titles, isItemHidden } = this.props;\n    const { expandedLayerNames } = this.state;\n    const onInputClick = () => {\n      this.onInputClick(\n        layer,\n        layer.children.filter((c) => !isItemHidden(c)).length &&\n          !layer.get('isAlwaysExpanded'),\n      );\n    };\n    const title = `${t(layer.name)} ${\n      !expandedLayerNames.includes(layer)\n        ? titles.subLayerShow\n        : titles.subLayerHide\n    }`;\n    return (\n      <div\n        role=\"button\"\n        tabIndex={0}\n        className=\"rs-layer-tree-toggle\"\n        title={title}\n        aria-expanded={expandedLayerNames.includes(layer)}\n        aria-label={title}\n        onClick={onInputClick}\n        onKeyPress={onInputClick}\n      >\n        <div>{t(layer.name)}</div>\n        {this.renderArrow(layer)}\n      </div>\n    );\n  }\n\n  renderItemContent(layer) {\n    return (\n      <>\n        {this.renderInput(layer)}\n        {this.renderToggleButton(layer)}\n      </>\n    );\n  }\n\n  renderItem(layer, level) {\n    const { isItemHidden } = this.props;\n    const {\n      renderItem,\n      renderItemContent,\n      renderBeforeItem,\n      renderAfterItem,\n      padding,\n      getParentClassName,\n    } = this.props;\n    const { expandedLayerNames } = this.state;\n\n    const children = expandedLayerNames.includes(layer)\n      ? [...layer.children.filter((c) => !isItemHidden(c))]\n      : [];\n\n    if (renderItem) {\n      return renderItem(layer, this.onInputClick, this.onToggle);\n    }\n\n    return (\n      <div className={getParentClassName()} key={layer.key}>\n        <div\n          className={`rs-layer-tree-item ${layer.visible ? 'rs-visible' : ''}`}\n          style={{\n            paddingLeft: `${padding * level}px`,\n          }}\n        >\n          {renderItemContent\n            ? renderItemContent(layer, this)\n            : this.renderItemContent(layer)}\n        </div>\n        {renderBeforeItem && renderBeforeItem(layer, level, this)}\n        {[...children]\n          .reverse()\n          .map((child) => this.renderItem(child, level + 1))}\n        {renderAfterItem && renderAfterItem(layer, level, this)}\n      </div>\n    );\n  }\n\n  renderTree() {\n    const { isItemHidden } = this.props;\n    const { layers } = this.state;\n\n    if (!layers) {\n      return null;\n    }\n\n    return (\n      <>\n        {layers\n          .filter((l) => !isItemHidden(l))\n          .reverse()\n          .map((l) => this.renderItem(l, 0))}\n      </>\n    );\n  }\n\n  render() {\n    const { className } = this.props;\n    return <div className={className}>{this.renderTree()}</div>;\n  }\n}\n\nLayerTree.propTypes = propTypes;\nLayerTree.defaultProps = defaultProps;\n\nexport default LayerTree;\n"],"names":["const","super","let","this"],"mappings":"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"}