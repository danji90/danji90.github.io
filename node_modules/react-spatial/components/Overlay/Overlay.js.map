{"version":3,"file":"Overlay.js","sources":["../../../src/components/Overlay/Overlay.js"],"sourcesContent":["import React, { Component, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Resizable } from 're-resizable';\nimport ResizeHandler from '../ResizeHandler';\n\nconst propTypes = {\n  /**\n   * CSS class added to container.\n   */\n  className: PropTypes.string,\n\n  /**\n   * Children content of the overlay.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Observed element to define screen size.\n   */\n  observe: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(Element),\n    PropTypes.instanceOf(Component),\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    PropTypes.shape({ current: PropTypes.instanceOf(Component) }),\n  ]),\n\n  /**\n   * Deactivate the ability to resize the overlay on mobile.\n   * /!\\ This prop is only used if isMobile (observer width < 768px).\n   */\n  isMobileResizable: PropTypes.bool,\n\n  /**\n   * Size parameters to the Resizable component on mobile.\n   * Pass following prop to re-resizable component: 'size', 'defaultSize', 'minHeight' & 'maxHeight'\n   * (https://github.com/bokuweb/re-resizable)\n   * /!\\ This prop is only used if isMobile (observer width < 768px).\n   */\n  mobileSize: PropTypes.shape({\n    minimalHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    maximalHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    defaultSize: PropTypes.shape({\n      height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n      width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    }),\n    size: PropTypes.shape({\n      height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n      width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    }),\n  }),\n\n  /**\n   * Minimal width to consider the observed as mobile.\n   * Default is 768px.\n   */\n  thresholdWidthForMobile: PropTypes.number,\n\n  /**\n   * Callback when stop resizing\n   * Pass following prop to re-resizable component\n   * (https://github.com/bokuweb/re-resizable)\n   */\n  onResizeStop: PropTypes.func,\n\n  /**\n   * Callback when start resizing\n   * Pass following prop to re-resizable component\n   * (https://github.com/bokuweb/re-resizable)\n   */\n  onResizeStart: PropTypes.func,\n};\n\nconst defaultMobileSize = {\n  defaultSize: {\n    width: '100%',\n    height: '25%',\n  },\n  size: undefined,\n  maximalHeight: '100%',\n  minimalHeight: '25%',\n};\n\nconst defaultProps = {\n  className: null,\n  children: null,\n  observe: null,\n  isMobileResizable: true,\n  mobileSize: defaultMobileSize,\n  thresholdWidthForMobile: 768,\n  onResizeStop: () => {},\n  onResizeStart: () => {},\n};\n\n/**\n * The Overlay component creates a resizable, swipable overlay <div\\>\n */\nconst Overlay = ({\n  observe,\n  className,\n  children,\n  isMobileResizable,\n  mobileSize,\n  onResizeStop,\n  onResizeStart,\n  thresholdWidthForMobile,\n}) => {\n  const [isMobile, setIsMobile] = useState();\n\n  const onResize = (entries) => {\n    for (let i = 0; i < entries.length; i += 1) {\n      const { width } = entries[i].contentRect;\n      setIsMobile(width <= thresholdWidthForMobile);\n    }\n  };\n\n  let resizableMobileSize;\n  if (mobileSize) {\n    resizableMobileSize = { ...defaultMobileSize, ...mobileSize };\n  }\n\n  return (\n    <>\n      {observe ? <ResizeHandler observe={observe} onResize={onResize} /> : null}\n      {isMobile ? (\n        <Resizable\n          style={{\n            position: 'absolute',\n          }}\n          enable={{\n            top: isMobileResizable,\n            right: false,\n            bottom: false,\n            left: false,\n            topRight: false,\n            bottomRight: false,\n            bottomLeft: false,\n            topLeft: false,\n          }}\n          maxHeight={mobileSize && resizableMobileSize.maximalHeight}\n          minHeight={mobileSize && resizableMobileSize.minimalHeight}\n          handleComponent={{\n            top: <div className=\"tm-overlay-handler\">&mdash;</div>,\n          }}\n          onResizeStart={onResizeStart}\n          onResizeStop={onResizeStop}\n          handleStyles={{\n            top: {\n              top: '-20px',\n              height: '20px',\n              padding: '20px 0',\n              width: '100%',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            },\n          }}\n          size={resizableMobileSize.size}\n          defaultSize={mobileSize && resizableMobileSize.defaultSize}\n          className={`tm-overlay-mobile${className ? ` ${className}` : ''}`}\n        >\n          <div className=\"tm-overlay-mobile-content\">{children}</div>\n        </Resizable>\n      ) : (\n        <div className={`tm-overlay${className ? ` ${className}` : ''}`}>\n          {children}\n        </div>\n      )}\n    </>\n  );\n};\n\nOverlay.propTypes = propTypes;\nOverlay.defaultProps = defaultProps;\n\nexport default Overlay;\n"],"names":["const","let"],"mappings":"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"}