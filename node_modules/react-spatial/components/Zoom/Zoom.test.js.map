{"version":3,"file":"Zoom.test.js","sources":["../../../src/components/Zoom/Zoom.test.js"],"sourcesContent":["import React from 'react';\nimport renderer from 'react-test-renderer';\nimport { configure, shallow, mount } from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16';\nimport { act } from 'react-dom/test-utils';\nimport MapEvent from 'ol/MapEvent';\nimport OLView from 'ol/View';\nimport OLMap from 'ol/Map';\nimport Zoom from './Zoom';\n\nconfigure({ adapter: new Adapter() });\n\ndescribe('Zoom', () => {\n  test('should match snapshot.', () => {\n    const map = new OLMap({});\n    const component = renderer.create(<Zoom map={map} />);\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot with custom attributes', () => {\n    const map = new OLMap({});\n    const component = renderer.create(\n      <Zoom map={map} className=\"foo\" tabIndex={-1} title=\"bar\" />,\n    );\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot with zoom slider', () => {\n    const map = new OLMap({});\n    const component = renderer.create(<Zoom map={map} zoomSlider />);\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  [\n    ['click', {}],\n    ['keypress', { which: 13 }],\n  ].forEach((evt) => {\n    test(`should zoom in on ${evt[0]}.`, () => {\n      const map = new OLMap({ view: new OLView({ zoom: 5 }) });\n      const zooms = shallow(<Zoom map={map} />);\n      zooms\n        .find('.rs-zoom-in')\n        .first()\n        .simulate(...evt);\n\n      expect(map.getView().getZoom()).toBe(6);\n    });\n\n    test(`should zoom in on ${evt[0]} (delta: 0.3).`, () => {\n      const map = new OLMap({ view: new OLView({ zoom: 5 }) });\n      const zooms = shallow(<Zoom map={map} delta={0.3} />);\n      zooms\n        .find('.rs-zoom-in')\n        .first()\n        .simulate(...evt);\n\n      expect(map.getView().getZoom()).toBe(5.3);\n    });\n\n    test(`should zoom out on ${evt[0]}.`, () => {\n      const map = new OLMap({ view: new OLView({ zoom: 5 }) });\n      const zooms = shallow(<Zoom map={map} />);\n      zooms\n        .find('.rs-zoom-out')\n        .first()\n        .simulate(...evt);\n\n      expect(map.getView().getZoom()).toBe(4);\n    });\n\n    test(`should zoom out on ${evt[0]} (delta: 0.3).`, () => {\n      const map = new OLMap({ view: new OLView({ zoom: 5 }) });\n      const zooms = shallow(<Zoom map={map} delta={0.3} />);\n      zooms\n        .find('.rs-zoom-out')\n        .first()\n        .simulate(...evt);\n\n      expect(map.getView().getZoom()).toBe(4.7);\n    });\n  });\n\n  test('should remove zoomSlider control on unmount.', () => {\n    const map = new OLMap({});\n    const spy = jest.spyOn(map, 'removeControl');\n    const spy2 = jest.spyOn(map, 'addControl');\n    const wrapper = mount(<Zoom map={map} zoomSlider />);\n    expect(spy).toHaveBeenCalledTimes(0);\n    wrapper.unmount();\n    expect(spy).toHaveBeenCalledTimes(1);\n    expect(spy.mock.calls[0][0]).toBe(spy2.mock.calls[0][0]);\n  });\n\n  test('should disable zoom-in button on mount with max zoom..', () => {\n    const map = new OLMap({\n      view: new OLView({ maxZoom: 20, zoom: 20 }),\n    });\n    const spy = jest.spyOn(map.getView(), 'setZoom');\n    const wrapper = mount(<Zoom map={map} />);\n    act(() => {\n      map.dispatchEvent(new MapEvent('moveend', map));\n    });\n    wrapper.update();\n    expect(wrapper.find('.rs-zoom-in').prop('disabled')).toEqual(true);\n    wrapper.find('.rs-zoom-in').first().simulate('click');\n    expect(spy).toHaveBeenCalledTimes(0);\n  });\n\n  test('should disable zoom-out button on mount with min zoom.', () => {\n    const map = new OLMap({\n      view: new OLView({ minZoom: 2, zoom: 2 }),\n    });\n    const spy = jest.spyOn(map.getView(), 'setZoom');\n    const wrapper = mount(<Zoom map={map} />);\n    act(() => {\n      map.dispatchEvent(new MapEvent('moveend', map));\n    });\n    wrapper.update();\n    expect(wrapper.find('.rs-zoom-out').prop('disabled')).toEqual(true);\n    wrapper.find('.rs-zoom-out').first().simulate('click');\n    expect(spy).toHaveBeenCalledTimes(0);\n  });\n});\n\ntest('should disable zoom-out button when reaching min zoom.', () => {\n  const map = new OLMap({\n    view: new OLView({ minZoom: 2, zoom: 3 }),\n  });\n  const spy = jest.spyOn(map.getView(), 'setZoom');\n  const wrapper = mount(<Zoom map={map} />);\n  wrapper.find('.rs-zoom-out').first().simulate('click');\n  expect(spy).toHaveBeenCalledTimes(1);\n  act(() => {\n    map.dispatchEvent(new MapEvent('moveend', map));\n  });\n  wrapper.update();\n  expect(wrapper.find('.rs-zoom-out').prop('disabled')).toEqual(true);\n});\n"],"names":["const"],"mappings":"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"}