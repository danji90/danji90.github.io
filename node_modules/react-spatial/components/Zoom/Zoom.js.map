{"version":3,"file":"Zoom.js","sources":["../../../src/components/Zoom/Zoom.js"],"sourcesContent":["import React, {\n  useEffect,\n  useRef,\n  useCallback,\n  useState,\n  useMemo,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { FaPlus, FaMinus } from 'react-icons/fa';\nimport { ZoomSlider } from 'ol/control';\nimport OLMap from 'ol/Map';\n\nconst propTypes = {\n  /**\n   * An [ol/map](https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html).\n   */\n  map: PropTypes.instanceOf(OLMap).isRequired,\n\n  /**\n   * The zoom delta applied on each click.\n   */\n  delta: PropTypes.number,\n\n  /**\n   * Titles HTML attribtues for button.\n   */\n  titles: PropTypes.shape({\n    zoomIn: PropTypes.string,\n    zoomOut: PropTypes.stirng,\n  }),\n\n  /**\n   * Children content of the zoom in button.\n   */\n  zoomInChildren: PropTypes.node,\n\n  /**\n   * Children content of the zoom out button.\n   */\n  zoomOutChildren: PropTypes.node,\n\n  /**\n   * Display a slider to zoom.\n   */\n  zoomSlider: PropTypes.bool,\n};\n\nconst defaultProps = {\n  titles: {\n    zoomIn: 'Zoom in',\n    zoomOut: 'Zoom out',\n  },\n  zoomInChildren: <FaPlus focusable={false} />,\n  zoomOutChildren: <FaMinus focusable={false} />,\n  zoomSlider: false,\n  delta: 1,\n};\n\nconst updateZoom = (map, zoomAction) => {\n  map.getView().cancelAnimations();\n  const zoom = map.getView().getZoom();\n\n  map.getView().animate({ zoom: zoom + zoomAction });\n};\n\n/**\n * The Zoom component creates a zoom wrapper containing zoom-in and zoom-out buttons\n * and an optional [ol/ZoomSlider](https://openlayers.org/en/latest/apidoc/module-ol_control_ZoomSlider-ZoomSlider.html).\n */\nfunction Zoom({\n  map,\n  titles,\n  zoomInChildren,\n  zoomOutChildren,\n  zoomSlider,\n  delta,\n  ...other\n}) {\n  const ref = useRef();\n  const [currentZoom, setZoom] = useState();\n\n  const zoomIn = useCallback(\n    (evt) => {\n      if (!evt.which || evt.which === 13) {\n        updateZoom(map, delta);\n      }\n    },\n    [map],\n  );\n\n  const zoomOut = useCallback(\n    (evt) => {\n      if (!evt.which || evt.which === 13) {\n        updateZoom(map, -delta);\n      }\n    },\n    [map],\n  );\n\n  const zoomInDisabled = useMemo(() => {\n    return (\n      currentZoom >=\n      map.getView().getConstrainedZoom(map.getView().getMaxZoom())\n    );\n  }, [currentZoom]);\n\n  const zoomOutDisabled = useMemo(() => {\n    return (\n      currentZoom <=\n      map.getView().getConstrainedZoom(map.getView().getMinZoom())\n    );\n  }, [currentZoom]);\n\n  useEffect(() => {\n    /* Trigger zoom update to disable zooms on max and min */\n    const zoomListener = () => setZoom(map.getView().getZoom());\n    map.on('moveend', zoomListener);\n\n    let control;\n    if (zoomSlider && ref.current) {\n      control = new ZoomSlider();\n      // We don't want to navigate to the zoom slider using TAB navigation.\n      control.element.firstElementChild.tabIndex = -1;\n      // Set the zoom slider in the custom control wrapper.\n      control.setTarget(ref.current);\n      map.addControl(control);\n    }\n    return () => {\n      map.un('moveend', zoomListener);\n      if (control) {\n        map.removeControl(control);\n      }\n    };\n  }, [map, zoomSlider, ref.current]);\n\n  return (\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    <div className=\"rs-zooms-bar\" {...other}>\n      <button\n        type=\"button\"\n        tabIndex={0}\n        className=\"rs-zoom-in\"\n        title={titles.zoomIn}\n        onClick={zoomIn}\n        onKeyPress={zoomIn}\n        disabled={zoomInDisabled}\n      >\n        {zoomInChildren}\n      </button>\n      {zoomSlider ? <div className=\"rs-zoomslider-wrapper\" ref={ref} /> : null}\n      <button\n        type=\"button\"\n        tabIndex={0}\n        className=\"rs-zoom-out\"\n        title={titles.zoomOut}\n        onClick={zoomOut}\n        onKeyPress={zoomOut}\n        disabled={zoomOutDisabled}\n      >\n        {zoomOutChildren}\n      </button>\n    </div>\n  );\n}\n\nZoom.propTypes = propTypes;\nZoom.defaultProps = defaultProps;\n\nexport default React.memo(Zoom);\n"],"names":["const","let"],"mappings":"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"}