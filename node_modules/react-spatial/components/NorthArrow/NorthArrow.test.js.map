{"version":3,"file":"NorthArrow.test.js","sources":["../../../src/components/NorthArrow/NorthArrow.test.js"],"sourcesContent":["import 'jest-canvas-mock';\nimport React from 'react';\nimport renderer from 'react-test-renderer';\nimport { act } from 'react-dom/test-utils';\nimport { configure, mount } from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16';\nimport MapEvent from 'ol/MapEvent';\nimport OLMap from 'ol/Map';\nimport OLView from 'ol/View';\nimport { TiImage } from 'react-icons/ti';\nimport NorthArrow from './NorthArrow';\n\nconfigure({ adapter: new Adapter() });\nlet olView;\nlet olMap;\n\ndescribe('NorthArrow', () => {\n  beforeEach(() => {\n    olView = new OLView();\n    olMap = new OLMap({ view: olView });\n  });\n\n  test('should match snapshot with default value.', () => {\n    let component;\n    renderer.act(() => {\n      component = renderer.create(<NorthArrow map={olMap} />);\n    });\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot with custom attributes.', () => {\n    let component;\n    renderer.act(() => {\n      component = renderer.create(\n        <NorthArrow map={olMap} className=\"test-class\" tabIndex={0} />,\n      );\n    });\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot with children.', () => {\n    let component;\n    renderer.act(() => {\n      component = renderer.create(\n        <NorthArrow map={olMap}>\n          <TiImage />\n        </NorthArrow>,\n      );\n    });\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot rotated.', () => {\n    let component;\n    renderer.act(() => {\n      component = renderer.create(\n        <NorthArrow map={olMap} rotationOffset={45} />,\n      );\n    });\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should match snapshot with circle.', () => {\n    let component;\n    renderer.act(() => {\n      component = renderer.create(<NorthArrow circled map={olMap} />);\n    });\n    const tree = component.toJSON();\n    expect(tree).toMatchSnapshot();\n  });\n\n  test('should react on view rotation (transform: `rotate(20deg)`)', () => {\n    const wrapper = mount(<NorthArrow map={olMap} />);\n    // Trigger view rotation\n    olMap.getView().setRotation(0.3490658503988659);\n    act(() => {\n      olMap.dispatchEvent(new MapEvent('postrender', olMap));\n      // 20 degrees = 0.3490658503988659 radians\n    });\n    expect(wrapper.html()).toMatchSnapshot();\n  });\n\n  test('should react on view rotation with offset (transform: `rotate(10deg)`)', () => {\n    const wrapper = mount(<NorthArrow map={olMap} rotationOffset={-10} />);\n    olMap.getView().setRotation(0.3490658503988659);\n    act(() => {\n      olMap.dispatchEvent(new MapEvent('postrender', olMap));\n    });\n    expect(wrapper.html()).toMatchSnapshot();\n  });\n\n  test('should remove post render event on unmount', () => {\n    const wrapper = mount(<NorthArrow map={olMap} rotationOffset={-10} />);\n    // eslint-disable-next-line no-underscore-dangle\n    expect(olMap.listeners_.postrender.length).toBe(4);\n    wrapper.unmount();\n    // eslint-disable-next-line no-underscore-dangle\n    expect(olMap.listeners_.postrender.length).toBe(3);\n  });\n});\n"],"names":["let","const"],"mappings":"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"}